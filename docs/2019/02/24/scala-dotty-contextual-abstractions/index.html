<!doctype html>
<html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Scala3に入るかもしれないContextual Abstractionsを味見してみた(更新・追記あり) - cats cats cats</title><link rel="manifest" href="/cats-cats-cats/manifest.json"><meta name="application-name" content="cats cats cats"><meta name="msapplication-TileImage" content="/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="cats cats cats"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Scala3のリサーチコンパイラであるDottyにImplicitsに代わる「Contextual Abstractions」と呼ばれる一連の機能が実装されていたので一部を味見してみました。 （記事の本文は2020年2月8日時点のDotty最新版と整合するように更新されています。更新の詳細はここを見てくださいを見てください。)"><meta property="og:type" content="article"><meta property="og:title" content="Scala3に入るかもしれないContextual Abstractionsを味見してみた(更新・追記あり)"><meta property="og:url" content="https://hinastory.github.io/cats-cats-cats/2019/02/24/scala-dotty-contextual-abstractions/"><meta property="og:site_name" content="cats cats cats"><meta property="og:description" content="Scala3のリサーチコンパイラであるDottyにImplicitsに代わる「Contextual Abstractions」と呼ばれる一連の機能が実装されていたので一部を味見してみました。 （記事の本文は2020年2月8日時点のDotty最新版と整合するように更新されています。更新の詳細はここを見てくださいを見てください。)"><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://hinastory.github.io/cats-cats-cats/gallery/thumbnails/dotty-logo.png"><meta property="article:published_time" content="2019-02-24T03:49:20.000Z"><meta property="article:modified_time" content="2021-02-20T00:05:34.693Z"><meta property="article:author" content="hinastory"><meta property="article:tag" content="Scala"><meta property="article:tag" content="Dotty"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hinastory.github.io/cats-cats-cats/gallery/thumbnails/dotty-logo.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hinastory.github.io/cats-cats-cats/2019/02/24/scala-dotty-contextual-abstractions/"},"headline":"Scala3に入るかもしれないContextual Abstractionsを味見してみた(更新・追記あり)","image":["https://hinastory.github.io/cats-cats-cats/gallery/thumbnails/dotty-logo.png"],"datePublished":"2019-02-24T03:49:20.000Z","dateModified":"2021-02-20T00:05:34.693Z","author":{"@type":"Person","name":"hinastory"},"publisher":{"@type":"Organization","name":"cats cats cats","logo":{"@type":"ImageObject","url":"https://hinastory.github.io/gallery/profile/cats-cats-cats-logo.png"}},"description":"Scala3のリサーチコンパイラであるDottyにImplicitsに代わる「Contextual Abstractions」と呼ばれる一連の機能が実装されていたので一部を味見してみました。 （記事の本文は2020年2月8日時点のDotty最新版と整合するように更新されています。更新の詳細はここを見てくださいを見てください。)"}</script><link rel="canonical" href="https://hinastory.github.io/cats-cats-cats/2019/02/24/scala-dotty-contextual-abstractions/"><link rel="alternate" href="/cats-cats-cats/cats-cats-cats/atom.xml" title="cats cats cats" type="application/atom+xml"><link rel="icon" href="/cats-cats-cats/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/vs2015.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/cats-cats-cats/css/default.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><!--!--><!--!--><script src="https://www.googletagmanager.com/gtag/js?id=UA-132406459-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-132406459-1');</script><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/cats-cats-cats/"><img src="/cats-cats-cats/gallery/profile/cats-cats-cats-logo.png" alt="cats cats cats" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/cats-cats-cats/"><i class="fa fa-home mr-1"></i> Home</a><a class="navbar-item" href="/cats-cats-cats/archives"><i class="fas fa-archive fa-fw mr-1"></i> Archives</a><a class="navbar-item" href="/cats-cats-cats/categories"><i class="fas fa-cat fa-fw mr-1"></i> Categories</a><a class="navbar-item" href="/cats-cats-cats/tags"><i class="fas fa-tags fa-fw mr-1"></i> Tags</a><a class="navbar-item" href="/cats-cats-cats/about"><i class="undefined mr-1"></i> About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="カタログ" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="検索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container is-fluid"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><h1 class="title is-3 is-size-4-mobile">Scala3に入るかもしれないContextual Abstractionsを味見してみた(更新・追記あり)</h1><div class="article-meta is-size-7 level is-mobile"><div class="level-left"><span class="level-item"><i class="mr-1 fas fa-calendar-alt"></i><span>2019-02-24</span></span><span class="level-item"><i class="mr-1 fas fa-cat"></i><a class="link-muted" href="/cats-cats-cats/categories/Tech/">Tech</a><span> / </span><a class="link-muted" href="/cats-cats-cats/categories/Tech/Language/">Language</a></span><span class="level-item"><i class="fas fa-tags"></i><span><a class="link-muted ml-1" rel="tag" href="/cats-cats-cats/tags/Scala/">Scala</a>, <a class="link-muted ml-1" rel="tag" href="/cats-cats-cats/tags/Dotty/">Dotty</a></span></span></div></div><div class="card-image"><span class="image is-7by3"><img class="cover-image" src="/cats-cats-cats/gallery/thumbnails/dotty-logo.png"></span></div><div class="content"><p>Scala3のリサーチコンパイラである<a href="http://dotty.epfl.ch/" title="" target="_blank">Dotty<i class="fas fa-external-link-alt fa-fw"></i></a>にImplicitsに代わる「Contextual Abstractions」と呼ばれる一連の機能が実装されていたので一部を味見してみました。</p>
<p>（記事の本文は2020年2月8日時点のDotty最新版と整合するように更新されています。更新の詳細は<a href="/cats-cats-cats/2019/02/24/scala-dotty-contextual-abstractions/#%E8%BF%BD%E8%A8%98%E6%9B%B4%E6%96%B0%E5%86%85%E5%AE%B9">ここ</a>を見てくださいを見てください。)</p>
<span id="more"></span>

<h2 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h2><ul>
<li>この記事はDottyに実装されたImplicitsに代わる「Contextual Abstractions」と呼ばれる一連の機能を味見してみたものです<ul>
<li><del>利用したDottyのバージョンは2019年2月時点で最新の0.13.0-RC1です。Dottyの開発は非常に活発なので異なるバージョンでは本記事の内容とは異なる場合があります</del></li>
<li><del>2019年6月時点で最新の0.16.0-RC3で変更があった文法の更新を反映しました。Dottyの開発は非常に活発なので異なるバージョンでは本記事の内容とは異なる場合があります</del></li>
<li><del>2019年9月時点で最新の0.18.1-RC1に更新しました。Dottyの開発は非常に活発なので異なるバージョンでは本記事の内容とは異なる場合があります</del></li>
<li><del>2019年9月時点で最新の0.19.0-RC1に更新しました。Dottyの開発は非常に活発なので異なるバージョンでは本記事の内容とは異なる場合があります</del></li>
<li>2020年2月時点で最新の0.19.0-RC1に更新しました。Dottyの開発は非常に活発なので異なるバージョンでは本記事の内容とは異なる場合があります</li>
</ul>
</li>
<li>「Contextual Abstractions」は従来のImplicitsで初学者が躓きそうな機能を整理して使いやすくしています<ul>
<li>「Contextual Abstractions」には従来のImplicitsでは実現できなかった機能(暗黙のインポート、型クラス導出、コンテキストクエリ等)も含まれています</li>
</ul>
</li>
<li>「Contextual Abstractions」の機能はまだ提案段階でありScala3の正式な仕様に決定したわけではありません<ul>
<li>今後機能が変化したり、機能が採用されなかったりする可能性も十分あります</li>
</ul>
</li>
<li>「Contextual Abstractions」がScala3に正式採用された場合、古いImplicitsは段階的に廃止される予定です<ul>
<li>「Contextual Abstractions」への移行はScalafixでサポートされる予定です</li>
</ul>
</li>
<li>この記事で紹介したサンプルコードは以下のリポジトリにあります。<ul>
<li><a href="https://github.com/hinastory/dotty_examples" title="" target="_blank">hinastory/dotty_examples: Example code of Dotty (Scala 3)<i class="fas fa-external-link-alt fa-fw"></i></a></li>
</ul>
</li>
</ul>
<h2 id="Scala3とは"><a href="#Scala3とは" class="headerlink" title="Scala3とは"></a>Scala3とは</h2><p>2020年初頭に出ることが予定されているScalaの次世代版です。コンパイラの高速化と大幅な機能強化が行われる予定です。基本的には現行のScala(Scala2)とのソースコードレベルの後方互換性を意識して機能強化が行われていますが<a href="Python%E3%81%AE%E6%95%99%E8%A8%93%E3%82%92%E6%B4%BB%E3%81%8B%E3%81%97%E3%81%A6%E3%80%81%E3%81%AA%E3%82%8B%E3%81%B9%E3%81%8F%E8%A8%80%E8%AA%9E%E3%81%AE%E4%B8%96%E4%BB%A3%E9%96%93%E3%81%AE%E6%96%AD%E7%B5%B6%E3%82%92%E8%B5%B7%E3%81%93%E3%81%95%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E9%85%8D%E6%85%AE%E3%81%97%E3%81%A6%E9%96%8B%E7%99%BA%E3%81%8C%E9%80%B2%E3%82%81%E3%82%89%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%82%88%E3%81%86%E3%81%A7%E3%81%99%E3%80%82%E3%82%82%E3%81%A1%E3%82%8D%E3%82%93%E9%85%8D%E6%85%AE%E3%81%8C%E8%B6%B3%E3%82%8A%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84%E5%8F%AF%E8%83%BD%E6%80%A7%E3%82%82%E3%81%82%E3%82%8A%E3%81%BE%E3%81%99%E3%81%8C%E3%83%BB%E3%83%BB%E3%83%BB">^1</a>、非互換が生まれるところや推奨の書き方が変わる所はScalfix[^2]で対応することが予定されています。</p>
<p>[^2]: <a href="https://scalacenter.github.io/scalafix/" title="" target="_blank">Scalafix<i class="fas fa-external-link-alt fa-fw"></i></a>はScalaにおける汎用的はリファクタリング、リンティングツールです。Scala3専用ではありません。</p>
<h2 id="Dottyとは"><a href="#Dottyとは" class="headerlink" title="Dottyとは"></a>Dottyとは</h2><p>Dotty<a href="%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%A9%E3%81%AE%E7%90%86%E8%AB%96%E7%9A%84%E3%81%AA%E5%9F%BA%E7%9B%A4%E3%81%AB%3C!--swig%EF%BF%BC4--%3E%E3%82%92%E7%94%A8%E3%81%84%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%8C%E5%90%8D%E5%89%8D%E3%81%AE%E7%94%B1%E6%9D%A5%E3%81%A7%E3%81%99%E3%80%82">^3</a>はScala3の研究用コンパイラで、Scala3の仕様や実装を研究するためのものです。Scala3はDottyがベースになることがアナウンスされています[^4]。</p>
<p>[^4]: Dottyに現在入っている機能が全てScala3に取り込まれるわけではありません。Scala3に正式に取り込まれる機能は <a href="https://docs.scala-lang.org/sips/" title="" target="_blank">Scala Improvement Process (SIP)<i class="fas fa-external-link-alt fa-fw"></i></a>(JavaのJCP/JSRのようなもの)を通過する必要があり、ここで承認が得られなければScala3に取り込まれることはありません。2019年2月時点ではDottyの新機能の多くはまだSIP以前の提案段階であり、これから徐々にSIPのレビュープロセスに乗せられていくものと予想されます。</p>
<h2 id="Contextual-Abstractionsとは"><a href="#Contextual-Abstractionsとは" class="headerlink" title="Contextual Abstractionsとは"></a>Contextual Abstractionsとは</h2><p>現行のScalaには俗にImplicitsと呼ばれる機能がありますが、初学者を非常に混乱させる機能として悪名高いものでした<a href="%E7%8F%BE%E8%A1%8C%E3%81%AEImplicits%E3%81%AE%E6%B7%B7%E4%B9%B1%E3%81%99%E3%82%8B%E3%83%9D%E3%82%A4%E3%83%B3%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E3%81%AF%3C!--swig%EF%BF%BC7--%3E%E3%81%A7%E8%A9%B3%E3%81%97%E3%81%8F%E5%8F%96%E3%82%8A%E4%B8%8A%E3%81%92%E3%82%89%E3%82%8C%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99%E3%80%82">^5</a>。そこでDottyには、この混乱に決着を着けるべくImplicitsの機能を包含しつつより整理された「Contextual Abstractions」と呼ばれる一連の機能が実装されました[^6]。Implicitsの代替という面でみるとこれらの機能は「implicit」というキーワードをなるべく使わずに別の用語(<code>given</code>等)で置き換えて、型クラスをより書きやすいようにチューニングしたような内容になっている印象です。本記事では<a href="https://dotty.epfl.ch/docs/index.html" title="" target="_blank">Dottyドキュメント<i class="fas fa-external-link-alt fa-fw"></i></a>[^7]を参考にしながら、「Contextual Abstractions」の機能の一部を味見してみました。以下が味見した機能の一覧です[^8]。</p>
<ul>
<li><code>given</code>インスタンス(Given Instances)<ul>
<li>従来の<code>implicit</code>で定義されていたインスタンスと同等です</li>
</ul>
</li>
<li><code>using</code>節(Using Clauses)<ul>
<li>従来の<code>implicit</code>で定義されていたパラメータリストと同等です</li>
</ul>
</li>
<li><code>given</code>インポート(Given Imports)<ul>
<li>通常のimportでは<code>given</code>で定義された<code>given</code>インスタンスはインポートされず、別途<code>import A.given</code>でインポートする必要があります</li>
<li><code>import A.{given, _}</code>でパッケージAの<code>given</code>インスタンスも含めた全てをインポートできます</li>
<li><code>given</code>インスタンスがどこから来たのかを明確にするために導入されたようです</li>
</ul>
</li>
<li>拡張メソッド(Extension Methods)<ul>
<li>Dottyの新機能です</li>
<li>型が定義された後にメソッドを追加することができます</li>
</ul>
</li>
<li>型クラスの実装(Implementing Typeclasses)<ul>
<li>「<code>given</code>インスタンス」、「<code>using</code>節」、「拡張メソッド」でよりシンプルに型クラスが実装可能になりました</li>
</ul>
</li>
</ul>
<p>[^6]: 暗黙のインスタンスと推論可能パラメータが追加された経緯を知りたい方は<a href="https://github.com/lampepfl/dotty/pull/5458" title="" target="_blank">#5458<i class="fas fa-external-link-alt fa-fw"></i></a>と <a href="https://github.com/lampepfl/dotty/pull/5825" title="" target="_blank">#5852<i class="fas fa-external-link-alt fa-fw"></i></a>をご確認ください・・・#5458の方は長すぎてまともに追っていませんが元々は<code>witness</code>というキーワードで提案されて途中で<code>instance</code>に変わって#5825で<code>implied</code>に変わったようです。本当に大激論で互換性に対する懸念が何回も強く出ています。とりあえずこの機能はSIPを通さないとScala3に入ることはないという念押しでマージされました。それ以外のContextual Abstractionsの機能(拡張メソッドや型クラスの導出等)はここまでもめた様子はなかったです。さらに<a href="https://github.com/lampepfl/dotty/pull/6649" title="" target="_blank">#6649<i class="fas fa-external-link-alt fa-fw"></i></a><br>で<code>delegate</code>に変更されました。そしてさらに、<a href="https://github.com/lampepfl/dotty/pull/6773" title="" target="_blank">#6773<i class="fas fa-external-link-alt fa-fw"></i></a>と<a href="https://github.com/lampepfl/dotty/pull/7210" title="" target="_blank">#7210<i class="fas fa-external-link-alt fa-fw"></i></a>で大幅に文法チェンジ！！<code>delegate</code>が排除されて<code>given</code>一色になりました・・・　本当に何回変わるんだろう・・・ツライ・・・<br>[^7]: このドキュメントは最新版のスナップショットなので、どんどん書き換えられています。今の所過去のバージョンは参照できないみたいです・・・<br>[^8]: 機能の日本語訳は自分がしました。間違っていたら教えてください。</p>
<h2 id="味見の方法"><a href="#味見の方法" class="headerlink" title="味見の方法"></a>味見の方法</h2><a href="https://github.com/lampepfl/dotty/releases/tag/0.22.0-RC1" title="" target="_blank">ここ<i class="fas fa-external-link-alt fa-fw"></i></a>から`dotty-0.22.0-RC1.zip`をダウンロードして解凍します。解凍後のフォルダの`bin`にパスを通せば利用できるようになります。
<p><code>dotc</code>がコンパイラです。<code>dotr</code>はクラス名を指定するとコンパイル済みのバイナリを実行します。単独で起動した場合にはREPLになります。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ dotc &lt;ソースファイル名&gt; <span class="hljs-comment"># ソースコードのコンパイル</span><br>$ dotr &lt;メインクラス名&gt; <span class="hljs-comment"># コンパイル済みのコードを実行</span><br></code></pre></td></tr></tbody></table></figure>

<p>もしくはサンプルコードをGitHubで公開したので、<code>sbt</code>をすでにインストールされている方はそちらの方が早いと思います。使い方は<code>README.md</code>をご覧ください</p>
<a target="_blank" rel="noopener" href="https://github.com/hinastory/dotty_examples"><img src="https://gh-card.dev/repos/hinastory/dotty_examples.svg?fullname"></a>

<h2 id="味見の結果"><a href="#味見の結果" class="headerlink" title="味見の結果"></a>味見の結果</h2><p>Dottyドキュメントに記載されている例をベースに味見をしてみました<a href="%E4%B8%80%E9%83%A8%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%97%E3%82%84%E3%81%99%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E6%89%8B%E3%82%92%E5%8A%A0%E3%81%88%E3%81%9F%E3%82%8A%E3%80%81%E3%82%B3%E3%83%A1%E3%83%B3%E3%83%88%E3%81%A7%E8%AA%AC%E6%98%8E%E3%82%92%E5%8A%A0%E3%81%88%E3%81%9F%E3%82%8A%E3%80%81%E4%BE%8B%E3%81%8C%E9%96%93%E9%81%95%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E7%AE%87%E6%89%80%E3%82%92%E4%BF%AE%E6%AD%A3%E3%81%97%E3%81%9F%E3%82%8A%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%81%AE%E3%81%A7%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88%E3%81%9D%E3%81%AE%E3%81%BE%E3%81%BE%E3%81%A8%E3%81%84%E3%81%86%E3%82%8F%E3%81%91%E3%81%A7%E3%81%AF%E3%81%AA%E3%81%84%E3%81%A7%E3%81%99%E3%80%82">^9</a>。</p>
<h3 id="基本的な例-拡張メソッド"><a href="#基本的な例-拡張メソッド" class="headerlink" title="基本的な例(拡張メソッド)"></a>基本的な例(拡張メソッド)</h3><p>拡張メソッドは既存の型にメソッドを注入できる機能です。ポイントは「継承」を用いずにアドホックにメソッド拡張を行える点です。</p>
<p>拡張の仕方は３通りあって、直接、型にメソッドを拡張する方法と、トレイトを用いて拡張メソッドを定義したあとに、<code>given</code>インスタンスで注入する方法と<code>extension</code>キーワードを使って拡張メソッドの定義と注入を一緒に済ませてしまう方法です。</p>
<figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/** 拡張メソッドのサンプル */</span><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ExtensionMethodExampleDefs</span> </span>{<br>  <span class="hljs-comment">// Circle型にcircumferenceメソッドを拡張する</span><br>  <span class="hljs-keyword">case</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Circle</span>(<span class="hljs-params">x: <span class="hljs-type">Double</span>, y: <span class="hljs-type">Double</span>, radius: <span class="hljs-type">Double</span></span>)</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(c: <span class="hljs-type">Circle</span>).circumference: <span class="hljs-type">Double</span> = c.radius * math.<span class="hljs-type">Pi</span> * <span class="hljs-number">2</span><br><br>  <span class="hljs-comment">// Seq[String]型にlongestStringsメソッドを拡張する</span><br>  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">StringSeqOps</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(xs: <span class="hljs-type">Seq</span>[<span class="hljs-type">String</span>]).longestStrings = {<br>      <span class="hljs-keyword">val</span> maxLength = xs.map(_.length).max<br>      xs.filter(_.length == maxLength)<br>    }<br>  }<br><br>  <span class="hljs-comment">// 演算子タイプの拡張メソッド</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(x: <span class="hljs-type">String</span>) &lt;&lt; (y: <span class="hljs-type">String</span>) = <span class="hljs-string">s"???? <span class="hljs-subst">$x</span> <span class="hljs-subst">$y</span> ????"</span><br><br>  <span class="hljs-comment">// `extension`を用いた専用構文でも定義可能</span><br>  extension stringOps on (xs: <span class="hljs-type">Seq</span>[<span class="hljs-type">String</span>]) {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">longestStrings2</span></span>: <span class="hljs-type">Seq</span>[<span class="hljs-type">String</span>] = {<br>      <span class="hljs-keyword">val</span> maxLength = xs.map(_.length).max<br>      xs.filter(_.length == maxLength)<br>    }<br>  }<br><br>  <span class="hljs-comment">// ジェネリクスを用いた`extension`も可能</span><br>  extension listOps on [<span class="hljs-type">T</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>]) {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">second</span> </span>= xs.tail.head<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">third</span></span>: <span class="hljs-type">T</span> = xs.tail.tail.head<br>  }<br><br>  <span class="hljs-comment">// 無名の`extension`も可能</span><br>  extension on [<span class="hljs-type">T</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>])(<span class="hljs-keyword">using</span> <span class="hljs-type">Ordering</span>[<span class="hljs-type">T</span>]) {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">largest</span></span>(n: <span class="hljs-type">Int</span>) = xs.sorted.takeRight(n)<br>  }<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>以下のように利用します。</p>
<figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">ExtensionMethodExample</span> </span>{<br>  <span class="hljs-keyword">import</span> <span class="hljs-type">ExtensionMethodExampleDefs</span>.{_, <span class="hljs-keyword">given</span>}<br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">use</span></span>(): <span class="hljs-type">Unit</span> = {<br>    println(<span class="hljs-string">"\n--- start ExtensionMethodExample ---"</span>)<br>    <span class="hljs-keyword">val</span> circle = <span class="hljs-type">Circle</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>)<br>    println( circle.circumference ) <span class="hljs-comment">// 6.283185307179586</span><br>    println( <span class="hljs-string">"abc"</span> &lt;&lt; <span class="hljs-string">"def"</span> ) <span class="hljs-comment">// ???? abc def ????</span><br><br>    <span class="hljs-keyword">given</span> ops1 as <span class="hljs-type">StringSeqOps</span><br>    println( <span class="hljs-type">List</span>(<span class="hljs-string">"here"</span>, <span class="hljs-string">"is"</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"list"</span>).longestStrings ) <span class="hljs-comment">// List("here", "list")</span><br><br>    <span class="hljs-comment">// extension構文で定義してものは`given`をする必要はない</span><br>    println( <span class="hljs-type">List</span>(<span class="hljs-string">"here"</span>, <span class="hljs-string">"is"</span>, <span class="hljs-string">"a"</span>, <span class="hljs-string">"list"</span>).longestStrings2 ) <span class="hljs-comment">// List("here", "list")</span><br>    println( <span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>).third ) <span class="hljs-comment">// 3</span><br>    println( <span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">12</span>, <span class="hljs-number">-3</span>).largest(<span class="hljs-number">2</span>) ) <span class="hljs-comment">// List(5, 12)</span><br>  }<br>}<br></code></pre></td></tr></tbody></table></figure>


<h3 id="少し高度な例-givenインスタンス、using節"><a href="#少し高度な例-givenインスタンス、using節" class="headerlink" title="少し高度な例(givenインスタンス、using節)"></a>少し高度な例(<code>given</code>インスタンス、<code>using</code>節)</h3><p>前述のとおり<code>given</code>インスタンスは型を拡張するときに用いることができますが、その応用として型パラメータを持つ型を「共通の型」として他の型を拡張できます。この機能は「型クラス」とも呼ばれますが詳細は次節で説明します。</p>
<p><code>using</code>節ではスコープに存在する<code>given</code>インスタンスを受け取ることができます。仮に<code>using</code>節で指定された変数の型にマッチする<code>given</code>インスタンスがスコープに存在すれば、呼び出し時に<code>using</code>節を省略することができます。</p>
<p>以下の例では<code>Int</code>型と<code>List</code>型を<code>Ord</code>型で拡張しています。また、<code>using</code>節を用いて<code>max</code>関数や<code>maximam</code>関数等を定義しています。</p>
<figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/** `given`インスタンス、`using`節のサンプル */</span><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">GivenExampleDefs</span> </span>{<br>  <span class="hljs-comment">/** 順序型の定義 */</span><br>  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Ord</span>[<span class="hljs-type">T</span>] </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">compare</span></span>(x: <span class="hljs-type">T</span>, y: <span class="hljs-type">T</span>): <span class="hljs-type">Int</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(x: <span class="hljs-type">T</span>) &lt; (y: <span class="hljs-type">T</span>) = compare(x, y) &lt; <span class="hljs-number">0</span> <span class="hljs-comment">// 拡張メソッド記法を使って定義してあります</span><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(x: <span class="hljs-type">T</span>) &gt; (y: <span class="hljs-type">T</span>) = compare(x, y) &gt; <span class="hljs-number">0</span> <span class="hljs-comment">// 上記と同様</span><br>  }<br><br>  <span class="hljs-comment">/** 順序型のIntの`given`インスタンスの定義 */</span><br>  <span class="hljs-keyword">given</span> intOrd: <span class="hljs-type">Ord</span>[<span class="hljs-type">Int</span>] {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">compare</span></span>(x: <span class="hljs-type">Int</span>, y: <span class="hljs-type">Int</span>) =<br>      <span class="hljs-keyword">if</span> (x &lt; y) <span class="hljs-number">-1</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &gt; y) +<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>  }<br><br>  <span class="hljs-comment">/** 順序型のListの`given`インスタンスの定義 */</span><br>  <span class="hljs-keyword">given</span> listOrd[<span class="hljs-type">T</span>](<span class="hljs-keyword">using</span> ord: <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">Ord</span>[<span class="hljs-type">List</span>[<span class="hljs-type">T</span>]]  {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">compare</span></span>(xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>], ys: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">Int</span> = (xs, ys) <span class="hljs-keyword">match</span> {<br>      <span class="hljs-keyword">case</span> (<span class="hljs-type">Nil</span>, <span class="hljs-type">Nil</span>) =&gt; <span class="hljs-number">0</span><br>      <span class="hljs-keyword">case</span> (<span class="hljs-type">Nil</span>, _) =&gt; <span class="hljs-number">-1</span> <span class="hljs-comment">// 空リストよりも非空リストの方が大きい</span><br>      <span class="hljs-keyword">case</span> (_, <span class="hljs-type">Nil</span>) =&gt; +<span class="hljs-number">1</span> <span class="hljs-comment">// 同上</span><br>      <span class="hljs-keyword">case</span> (x :: xs1, y :: ys1) =&gt;<br>        <span class="hljs-keyword">val</span> fst = ord.compare(x, y) <span class="hljs-comment">// 先頭の大きさがLists全体の大きさ</span><br>        <span class="hljs-keyword">if</span> (fst != <span class="hljs-number">0</span>) fst <span class="hljs-keyword">else</span> compare(xs1, ys1) <span class="hljs-comment">// 同じだったら次の要素を再帰的に繰り返す</span><br>    }<br>  }<br><br>  <span class="hljs-comment">/** `using`節 */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">max</span></span>[<span class="hljs-type">T</span>](x: <span class="hljs-type">T</span>, y: <span class="hljs-type">T</span>)(<span class="hljs-keyword">using</span> ord: <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">T</span> =<br>    <span class="hljs-keyword">if</span> (ord.compare(x, y) &lt; <span class="hljs-number">1</span>) y <span class="hljs-keyword">else</span> x<br><br>  <span class="hljs-comment">/** 無名`using`節 */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maximum</span></span>[<span class="hljs-type">T</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>])(<span class="hljs-keyword">using</span> <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">T</span> = xs.reduceLeft(max)<br><br>  <span class="hljs-comment">/** コンテキスト境界使った書き換え(Scala2と同様) */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maximum2</span></span>[<span class="hljs-type">T</span>: <span class="hljs-type">Ord</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">T</span> = xs.reduceLeft(max)<br><br>  <span class="hljs-comment">/** `using`節を使って新しい逆順序型クラスインスタンスを作る関数 */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">descending</span></span>[<span class="hljs-type">T</span>](<span class="hljs-keyword">using</span> asc: <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>] = <span class="hljs-keyword">new</span> <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>] {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">compare</span></span>(x: <span class="hljs-type">T</span>, y: <span class="hljs-type">T</span>) = asc.compare(y, x)<br>  }<br><br>  <span class="hljs-comment">/** より複雑な推論 */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">minimum</span></span>[<span class="hljs-type">T</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>])(<span class="hljs-keyword">using</span> <span class="hljs-type">Ord</span>[<span class="hljs-type">T</span>]) = maximum(xs)(<span class="hljs-keyword">using</span> descending)<br>}<br></code></pre></td></tr></tbody></table></figure>

<p><code>given</code>インスタンスの利用例が以下になります。</p>
<figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scala"><br><span class="hljs-comment">/** `GivenExapmple`の利用方法 */</span><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">GivenExample</span> </span>{<br>  <span class="hljs-keyword">import</span> <span class="hljs-type">GivenExampleDefs</span>.{_, <span class="hljs-keyword">given</span>} <span class="hljs-comment">// givenは　`Ord`の`&lt;`演算子を利用するのに必要</span><br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">use</span></span>(): <span class="hljs-type">Unit</span> = {<br>    println(<span class="hljs-string">"\n--- start GivenExample ---"</span>)<br><br>    println( max(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>) ) <span class="hljs-comment">// 3</span><br>    println( max(<span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), <span class="hljs-type">Nil</span>) ) <span class="hljs-comment">// List(1, 2, 3)</span><br>    println(<span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) &lt; <span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment">// true</span><br>    println(<span class="hljs-type">List</span>(<span class="hljs-number">9</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>) &lt; <span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) <span class="hljs-comment">// false</span><br><br>    <span class="hljs-keyword">val</span> numList = <span class="hljs-type">List</span>(<span class="hljs-number">1</span>,<span class="hljs-number">10</span>,<span class="hljs-number">2</span>)<br>    println( maximum(numList) ) <span class="hljs-comment">// 10</span><br>    println( maximum2(numList) ) <span class="hljs-comment">// 10</span><br>    println( minimum(numList) ) <span class="hljs-comment">// 1</span><br>  }<br>}<br></code></pre></td></tr></tbody></table></figure>

<h3 id="高度な例-型クラス"><a href="#高度な例-型クラス" class="headerlink" title="高度な例(型クラス)"></a>高度な例(型クラス)</h3><p>型クラスは単一の型を拡張するわけではなく「共通の型」を用意して「共通の型」を後から既存の型にアドホックに注入して拡張できる点が異なります。すでにコードで紹介した例を用いて型クラスとそうでない拡張を区別すると以下のようになります。</p>
<ul>
<li>単一の型を拡張（型クラスではない）<ul>
<li><code>String</code>型を拡張して<code>longestStrings</code>メソッドを追加</li>
</ul>
</li>
<li>共通の型で複数の型を拡張(型クラス)<ul>
<li>Ord型クラスを定義<ul>
<li>実態は型パラメータを持つトレイトで複数の型で共通で使えるメソッド<code>compare</code>と演算子<code>&lt;</code>、<code>&gt;</code>を持っている</li>
</ul>
</li>
<li><code>given</code>インスタンスを用いて<code>Int</code>型を<code>Ord</code>型クラスで拡張（<code>intOrd</code>）</li>
<li><code>given</code>インスタンスを用いて<code>List</code>型を<code>Ord</code>型クラスで拡張(<code>listOrd</code>)</li>
</ul>
</li>
</ul>
<p>以下の例ではプログラミングで有用な型クラスとして半群(<code>Semigroup</code>)、モノイド(<code>Monoid</code>)、関手(<code>Functor</code>)、モナド(<code>Monad</code>)を定義しています。また、型クラスの<code>given</code>インスタンスも定義しています。</p>
<figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/** 型クラスのサンプル */</span><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">TypeClassExampleDefs</span> </span>{<br>  <span class="hljs-keyword">import</span> annotation.infix<br>  <span class="hljs-comment">/** 半群の型クラス */</span><br>  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">SemiGroup</span>[<span class="hljs-type">T</span>] </span>{<br>    <span class="hljs-meta">@infix</span> <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(x: <span class="hljs-type">T</span>) combine (y: <span class="hljs-type">T</span>): <span class="hljs-type">T</span><br>  }<br><br>  <span class="hljs-comment">/** モノイドの型クラス */</span><br>  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Monoid</span>[<span class="hljs-type">T</span>] <span class="hljs-keyword">extends</span> <span class="hljs-title">SemiGroup</span>[<span class="hljs-type">T</span>] </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unit</span></span>: <span class="hljs-type">T</span><br>  }<br><br>  <span class="hljs-comment">/** applyでモノイドを召喚 */</span><br>  <span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">Monoid</span> </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">apply</span></span>[<span class="hljs-type">T</span>](<span class="hljs-keyword">using</span> m: <span class="hljs-type">Monoid</span>[<span class="hljs-type">T</span>]) = m<br>  }<br><br>  <span class="hljs-comment">/** `String`モノイド */</span><br>  <span class="hljs-keyword">given</span> <span class="hljs-type">Monoid</span>[<span class="hljs-type">String</span>] {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(x: <span class="hljs-type">String</span>) combine (y: <span class="hljs-type">String</span>): <span class="hljs-type">String</span> = x.concat(y)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unit</span></span>: <span class="hljs-type">String</span> = <span class="hljs-string">""</span><br>  }<br><br>  <span class="hljs-comment">/** `Int`モノイド */</span><br>  <span class="hljs-keyword">given</span> <span class="hljs-type">Monoid</span>[<span class="hljs-type">Int</span>] {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>(x: <span class="hljs-type">Int</span>) combine (y: <span class="hljs-type">Int</span>): <span class="hljs-type">Int</span> = x + y<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">unit</span></span>: <span class="hljs-type">Int</span> = <span class="hljs-number">0</span><br>  }<br><br>  <span class="hljs-comment">/** モノイドの和を求める */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">sum</span></span>[<span class="hljs-type">T</span>: <span class="hljs-type">Monoid</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">T</span>]): <span class="hljs-type">T</span> =<br>    xs.foldLeft(<span class="hljs-type">Monoid</span>[<span class="hljs-type">T</span>].unit)(_ combine _)<br><br>  <span class="hljs-comment">/** 関手の型クラス */</span><br>  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Functor</span>[<span class="hljs-type">F</span>[_]] </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>[<span class="hljs-type">A</span>, <span class="hljs-type">B</span>](x: <span class="hljs-type">F</span>[<span class="hljs-type">A</span>]).map(f: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">B</span>): <span class="hljs-type">F</span>[<span class="hljs-type">B</span>]<br>  }<br><br>  <span class="hljs-comment">/** モナドの型クラス */</span><br>  <span class="hljs-class"><span class="hljs-keyword">trait</span> <span class="hljs-title">Monad</span>[<span class="hljs-type">F</span>[_]] <span class="hljs-keyword">extends</span> <span class="hljs-title">Functor</span>[<span class="hljs-type">F</span>] </span>{<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>[<span class="hljs-type">A</span>, <span class="hljs-type">B</span>](x: <span class="hljs-type">F</span>[<span class="hljs-type">A</span>]).flatMap(f: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">F</span>[<span class="hljs-type">B</span>]): <span class="hljs-type">F</span>[<span class="hljs-type">B</span>]<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>[<span class="hljs-type">A</span>, <span class="hljs-type">B</span>](x: <span class="hljs-type">F</span>[<span class="hljs-type">A</span>]).map(f: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">B</span>) = x.flatMap(f `andThen` pure)<br><br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pure</span></span>[<span class="hljs-type">A</span>](x: <span class="hljs-type">A</span>): <span class="hljs-type">F</span>[<span class="hljs-type">A</span>]<br>  }<br><br>  <span class="hljs-comment">/** リストモナドのインスタンスを定義 */</span><br>  <span class="hljs-keyword">given</span> listMonad as <span class="hljs-type">Monad</span>[<span class="hljs-type">List</span>] {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>[<span class="hljs-type">A</span>, <span class="hljs-type">B</span>](xs: <span class="hljs-type">List</span>[<span class="hljs-type">A</span>]).flatMap(f: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">List</span>[<span class="hljs-type">B</span>]): <span class="hljs-type">List</span>[<span class="hljs-type">B</span>] =<br>      xs.flatMap(f)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pure</span></span>[<span class="hljs-type">A</span>](x: <span class="hljs-type">A</span>): <span class="hljs-type">List</span>[<span class="hljs-type">A</span>] =<br>      <span class="hljs-type">List</span>(x)<br>  }<br><br>  <span class="hljs-comment">/** リーダモナドのインスタンスを定義 */</span><br>  <span class="hljs-keyword">given</span> readerMonad[<span class="hljs-type">Ctx</span>] as <span class="hljs-type">Monad</span>[[<span class="hljs-type">X</span>] =&gt;&gt; <span class="hljs-type">Ctx</span> =&gt; <span class="hljs-type">X</span>] {<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> </span>[<span class="hljs-type">A</span>, <span class="hljs-type">B</span>](r: <span class="hljs-type">Ctx</span> =&gt; <span class="hljs-type">A</span>).flatMap(f: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">Ctx</span> =&gt; <span class="hljs-type">B</span>): <span class="hljs-type">Ctx</span> =&gt; <span class="hljs-type">B</span> =<br>      ctx =&gt; f(r(ctx))(ctx)<br>    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pure</span></span>[<span class="hljs-type">A</span>](x: <span class="hljs-type">A</span>): <span class="hljs-type">Ctx</span> =&gt; <span class="hljs-type">A</span> =<br>      ctx =&gt; x<br>  }<br><br>  <span class="hljs-comment">/** 関手の利用 */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">transform</span></span>[<span class="hljs-type">F</span>[_], <span class="hljs-type">A</span>, <span class="hljs-type">B</span>](src: <span class="hljs-type">F</span>[<span class="hljs-type">A</span>], func: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">B</span>)(<span class="hljs-keyword">using</span> <span class="hljs-type">Functor</span>[<span class="hljs-type">F</span>]): <span class="hljs-type">F</span>[<span class="hljs-type">B</span>] = src.map(func)<br><br>  <span class="hljs-comment">/** コンテキスト境界を使った書き換え */</span><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">transform2</span></span>[<span class="hljs-type">F</span>[_]: <span class="hljs-type">Functor</span>, <span class="hljs-type">A</span>, <span class="hljs-type">B</span>](src: <span class="hljs-type">F</span>[<span class="hljs-type">A</span>], func: <span class="hljs-type">A</span> =&gt; <span class="hljs-type">B</span>): <span class="hljs-type">F</span>[<span class="hljs-type">B</span>] = src.map(func)<br>}<br></code></pre></td></tr></tbody></table></figure>

<p>型クラスは以下のように利用できます。</p>
<figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs scala"><span class="hljs-comment">/** `TypeClassExampleDefs`の利用方法 */</span><br><span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">TypeClassExample</span> </span>{<br>  <span class="hljs-keyword">import</span> <span class="hljs-type">TypeClassExampleDefs</span>.{<span class="hljs-keyword">given</span>, _}<br><br>  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">use</span></span>(): <span class="hljs-type">Unit</span> = {<br>    println(<span class="hljs-string">"\n--- start TypeClassExample ---"</span>)<br>    println( sum(<span class="hljs-type">List</span>(<span class="hljs-string">"abc"</span>, <span class="hljs-string">"def"</span>, <span class="hljs-string">"gh"</span>)) ) <span class="hljs-comment">// abcdefgh</span><br>    println( sum(<span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)) ) <span class="hljs-comment">// 6</span><br>    println( summon[<span class="hljs-type">Monad</span>[<span class="hljs-type">List</span>]].pure(<span class="hljs-number">12</span>) ) <span class="hljs-comment">// List(12)</span><br><br>    println( transform(<span class="hljs-type">List</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), (_:<span class="hljs-type">Int</span>) * <span class="hljs-number">2</span>) ) <span class="hljs-comment">// List(2, 4, 6)</span><br><br>    <span class="hljs-comment">// Reader Monad Example</span><br>    <span class="hljs-keyword">val</span> calc: <span class="hljs-type">Int</span> =&gt; <span class="hljs-type">Int</span> = <span class="hljs-keyword">for</span> {<br>      x &lt;- (e:<span class="hljs-type">Int</span>) =&gt; e + <span class="hljs-number">1</span><br>      y &lt;- (e:<span class="hljs-type">Int</span>) =&gt; e * <span class="hljs-number">10</span><br>    } <span class="hljs-keyword">yield</span> x + y<br><br>    println( calc(<span class="hljs-number">3</span>) ) <span class="hljs-comment">// 34</span><br>  }<br>}<br></code></pre></td></tr></tbody></table></figure>

<h2 id="Contextual-Abstractionsのその他の機能"><a href="#Contextual-Abstractionsのその他の機能" class="headerlink" title="Contextual Abstractionsのその他の機能"></a>Contextual Abstractionsのその他の機能</h2><p>Contextual Abstractionsの機能で味見できなかった機能を簡単に紹介します。</p>
<ul>
<li>マルチバーサル等価性(Multiversal Equality)<ul>
<li>Scala2では文字列と数値が比較可能でしたが、この機能により厳密に型が合っていないとコンパイルエラーにすることもできるようになりました</li>
</ul>
</li>
<li>型クラスの導出(Typeclass Derivation)<ul>
<li>Haskellの<code>deriving</code>と同等の機能です。現在のDottyで導出可能な型クラスはマルチバーサル等価性を表す<code>Eql</code>のみのようです</li>
<li>メタプログラミングを使えば自分で導出可能な型クラスの定義もできます</li>
</ul>
</li>
<li>暗黙の型変換(implicit conversion)<ul>
<li>元々のImplicitsのトラブルメーカーです。新たに<code>Conversion</code>という型が定義されてその暗黙のインスタンスを定義することで利用できます</li>
</ul>
</li>
<li>コンテキスト関数(Context Functions)<ul>
<li>以前はImplicit Function Typeと呼ばれていた機能で0.13.0-RC-1で構文が変更されました</li>
<li>ビルダーパターンを簡単に実装できます</li>
</ul>
</li>
</ul>
<h2 id="味見してみた感想"><a href="#味見してみた感想" class="headerlink" title="味見してみた感想"></a>味見してみた感想</h2><p>Implicitsが大分飼いならされたような印象でした。特に従来はimplicitをパラメータリストで受け取っていたのを<code>given</code>という専用構文で受け取るようになったのが非常に分かりやすかったです。ただ、従来の<code>implicitly</code>の名称はまだかなり揺れているみたいです[^10]。</p>
<p>もともとは<a href="https://medium.com/@jducoeur/a-snippet-of-dotty-27eadcee72e3" title="" target="_blank">「A Snippet of Dotty」<i class="fas fa-external-link-alt fa-fw"></i></a>を読んで、あまりにも自分が知っているScalaと違っていたので調べ始めたのがこの記事を書こうと思ったきっかけです。この記事がScala3がどういう方向を目指しているのか知りたい人の参考になれば幸いです。</p>
<p>[^10]: もともと<code>summon</code>という名前で提案されていましたが、<code>0.13.0-RC-1</code>では<code>infer</code>に変わり、<a href="https://github.com/lampepfl/dotty/pull/5893" title="" target="_blank">#5893<i class="fas fa-external-link-alt fa-fw"></i></a>では<code>the</code>に変更されています。しかし、<a href="https://github.com/lampepfl/dotty/pull/7205" title="" target="_blank">#7205<i class="fas fa-external-link-alt fa-fw"></i></a>でまさかの<code>summon</code>の復活!! 追うのも楽じゃない・・・</p>
<h2 id="追記・更新内容"><a href="#追記・更新内容" class="headerlink" title="追記・更新内容"></a>追記・更新内容</h2><h3 id="2019年3月10日の更新内容"><a href="#2019年3月10日の更新内容" class="headerlink" title="2019年3月10日の更新内容"></a>2019年3月10日の更新内容</h3><a href="https://dotty.epfl.ch/blog/2019/03/05/13th-dotty-milestone-release.html" title="" target="_blank">本家のブログ<i class="fas fa-external-link-alt fa-fw"></i></a>が公開されたようです。`0.13.0-RC-1`のタグが打たれてから10日以上経ってからの公開なのでかなり遅い方だと思いますが、それだけ今回のリリースが盛りだくさんだったと言うことだと思います。本家のブログには従来の`implicit`がなぜダメだったのか丁寧に説明されていました。

<blockquote><p>The implicit keyword is used for both implicit conversions and conditional implicit values and we identified that their semantic differences must be communicated more clearly syntactically. Furthermore, the implicit keyword is ascribed too many overloaded meanings in the language (implicit vals, defs, objects, parameters). For instance, a newcomer can easily confuse the two examples above, although they demonstrate completely different things, a typeclass instance is an implicit object or val if unconditional and an implicit def with implicit parameters if conditional; arguably all of them are surprisingly similar (syntactically). Another consideration is that the implicit keyword annotates a whole parameter section instead of a single parameter, and passing an argument to an implicit parameter looks like a regular application. This is problematic because it can create confusion regarding what parameter gets passed in a call. Last but not least, sometimes implicit parameters are merely propagated in nested function calls and not used at all, so giving names to implicit parameters is often redundant and only adds noise to a function signature.</p>
<footer><strong>Dotty Blogより</strong></footer></blockquote>

<p>意訳すると従来の<code>implicit</code>には<code>implicit conversions</code>と<code>conditional implicit values</code>の２つの用途があったけど、意味が違うし初学者は混同しやすいので構文的に別にするという話です。というか<code>conditional implicit values</code>という言い方は自分は初めて目にしました。単純な<code>implicit values</code>よりもわかりやすいですね。</p>
<p>この本家のブログを受けてというわけではないですが、前回の記事でサンプルの解説が大分雑だったのでいろいろと見直して、サンプルコードも<a href="https://github.com/hinastory/dotty_examples" title="" target="_blank">GitHubに公開しました<i class="fas fa-external-link-alt fa-fw"></i></a>。興味のある方は味見をして頂けると幸いです。</p>
<h3 id="2019年6月22日の更新内容"><a href="#2019年6月22日の更新内容" class="headerlink" title="2019年6月22日の更新内容"></a>2019年6月22日の更新内容</h3><p>先日発表された<a target="_blank" rel="noopener" href="https://dotty.epfl.ch/blog/2019/06/11/16th-dotty-milestone-release.html%7D%E3%81%A7%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AB%E9%96%A2%E3%81%99%E3%82%8B%E5%A4%A7%E3%81%8D%E3%81%AA%E6%96%87%E6%B3%95%E5%A4%89%E6%9B%B4%E3%81%8C%E8%A1%8C%E3%82%8F%E3%82%8C%E3%81%BE%E3%81%97%E3%81%9F%E3%80%82%E5%85%B7%E4%BD%93%E7%9A%84%E3%81%AB%E3%81%AF%E4%BB%A5%E4%B8%8B%E3%81%AE%E9%80%9A%E3%82%8A%E3%81%A7%E3%81%99%E3%80%82" title="- `implied`から`delegate`にキーワードを変更 (＃6649) - 型ラムダに=>>を使用 (＃6558) - サンプルコードで使用していた - `given`節を最後にする (#6513) - 0.15.0-RC1で変更 上記の変更に伴い本文の該当箇所を修正しました。また、{% elink GitHubに公開したサンプルコード https://github.com/hinastory/dotty_examples" target="_blank">Dotty 0.16.0-RC3<i class="fas fa-external-link-alt fa-fw"></i></a>も0.16.0-RC3にしてあります。あと何回キーワードが変更されるんだろう・・・</p>
<h3 id="2019年9月15日の更新内容"><a href="#2019年9月15日の更新内容" class="headerlink" title="2019年9月15日の更新内容"></a>2019年9月15日の更新内容</h3><p>先日発表された<a href="https://dotty.epfl.ch/blog/2019/08/30/18th-dotty-milestone-release.html" title="" target="_blank">Dotty 0.18.1-RC1<i class="fas fa-external-link-alt fa-fw"></i></a>でリーダーモナドの例がコンパイルできるようになっていました。また、0.18.1-RC1で追加されたインデントベースの構文についても記事を書いたので興味があればご一読ください。</p>
<ul>
<li><a href="https://hinastory.github.io/cats-cats-cats/2019/09/15/scala-indentation/" title="" target="">Scala 3、Pythonのようにインデントベースの構文で書けるようになるってよ！</a></li>
</ul>
<h3 id="2019年9月28日の更新内容"><a href="#2019年9月28日の更新内容" class="headerlink" title="2019年9月28日の更新内容"></a>2019年9月28日の更新内容</h3><p>先日発表された<a href="https://dotty.epfl.ch/blog/2019/09/23/19th-dotty-milestone-release.html" title="" target="_blank">Dotty 0.19.0-RC1<i class="fas fa-external-link-alt fa-fw"></i></a>で本記事に関する文法が大きく変更されました。関連するプルリクは主に以下の4つです。</p>
<ul>
<li><a href="https://github.com/lampepfl/dotty/pull/6773" title="" target="_blank">Trial: given as instead of delegate for by odersky · Pull Request #6773 · lampepfl/dotty<i class="fas fa-external-link-alt fa-fw"></i></a></li>
<li><a href="https://github.com/lampepfl/dotty/pull/7210" title="" target="_blank">Change to new given syntax by odersky · Pull Request #7210 · lampepfl/dotty<i class="fas fa-external-link-alt fa-fw"></i></a></li>
<li><a href="https://github.com/lampepfl/dotty/pull/7245" title="" target="_blank">Drop old syntax styles for givens by odersky · Pull Request #7245 · lampepfl/dotty<i class="fas fa-external-link-alt fa-fw"></i></a></li>
<li><a href="https://github.com/lampepfl/dotty/pull/7205" title="" target="_blank">Replace the[...] by summon[...] by odersky · Pull Request #7205 · lampepfl/dotty<i class="fas fa-external-link-alt fa-fw"></i></a></li>
</ul>
<p>簡単に言うと<code>delegate</code>が<code>given</code>に置き換えられて<code>given</code>節が<code>given</code>パラメータになって<code>summon</code>大復活です。0.19.0-RC1より前のものも含まれていますが、今回合わせて修正しました。</p>
<h3 id="2020年2月8日の更新内容"><a href="#2020年2月8日の更新内容" class="headerlink" title="2020年2月8日の更新内容"></a>2020年2月8日の更新内容</h3><p>Dottyは0.21.0でめでたく<code>feature-complete</code>しました。つまりこれ以降は大きな機能追加はないはずです。　・・・と安心していたら0.22.0で<code>using</code>キーワードが追加されました。文法の調整はまだ続くようです・・・<br>今回は以下の３つのリリースで行われた修正を反映しています。</p>
<ul>
<li><a href="https://dotty.epfl.ch/blog/2019/11/04/20th-dotty-milestone-release.html" title="" target="_blank">Announcing Dotty 0.20.0-RC1 – `with` starting indentation blocks, inline given specializations and more<i class="fas fa-external-link-alt fa-fw"></i></a></li>
<li><a href="https://dotty.epfl.ch/blog/2019/12/20/21th-dotty-milestone-release.html" title="" target="_blank">Announcing Dotty 0.21.0-RC1 - explicit nulls, new syntax for `match` and conditional givens, and more<i class="fas fa-external-link-alt fa-fw"></i></a></li>
<li><a href="https://dotty.epfl.ch/blog/2020/02/05/22nd-dotty-milestone-release.html" title="" target="_blank">Announcing Dotty 0.22.0-RC1 - syntactic enhancements, type-level arithmetic and more<i class="fas fa-external-link-alt fa-fw"></i></a></li>
</ul>
<p>大きな変更は<code>using</code>、<code>on</code>、<code>as</code>、<code>extension</code>などのキーワードが登場してより読みやすくなったことだと思います。実際の使い方は記事本文をご覧ください。<br>あと、今まで拡張メソッドはこの記事では説明がなかったので追加しました。</p>
</div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_hatena"></a><a class="a2a_button_reddit"></a></div><script async src="https://static.addtoany.com/menu/page.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/cats-cats-cats/2019/03/09/hexo-tag-details/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">hexo-tag-detailsを公開しました</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/cats-cats-cats/2019/02/15/devsumi-2019-winter/"><span class="level-item">Developers Summit 2019に参加した感想など</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--><div><div class="popular-posts-box"><div class="popular-posts-box-title">article.related_posts</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-img"><a href="/cats-cats-cats/2021/03/16/contextual-abstructions/" title="Contextual Abstractionsで様々なコンテキストをうまく抽象化する" rel="bookmark"><img src="/cats-cats-cats/gallery/thumbnails/eiga_film.png" /></a></div><div class="popular-posts-title"><h3><div class="popular-posts-date">2021-03-16</div><a href="/cats-cats-cats/2021/03/16/contextual-abstructions/" title="Contextual Abstractionsで様々なコンテキストをうまく抽象化する" rel="bookmark">Contextual Abstractionsで様々なコンテキストをうまく抽象化する</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-img"><a href="/cats-cats-cats/2019/09/15/scala-indentation/" title="Scala 3、Pythonのようにインデントベースの構文で書けるようになるってよ！" rel="bookmark"><img src="/cats-cats-cats/gallery/thumbnails/dotty-logo.png" /></a></div><div class="popular-posts-title"><h3><div class="popular-posts-date">2019-09-15</div><a href="/cats-cats-cats/2019/09/15/scala-indentation/" title="Scala 3、Pythonのようにインデントベースの構文で書けるようになるってよ！" rel="bookmark">Scala 3、Pythonのようにインデントベースの構文で書けるようになるってよ！</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-img"><a href="/cats-cats-cats/2020/02/11/scala3_programming_category/" title="Scala3と圏論とプログラミング" rel="bookmark"><img src="/cats-cats-cats/gallery/thumbnails/scala3_cats.png" /></a></div><div class="popular-posts-title"><h3><div class="popular-posts-date">2020-02-11</div><a href="/cats-cats-cats/2020/02/11/scala3_programming_category/" title="Scala3と圏論とプログラミング" rel="bookmark">Scala3と圏論とプログラミング</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-img"><a href="/cats-cats-cats/2021/12/30/2021-last/" title="2021年の技術的な振り返り" rel="bookmark"><img src="/cats-cats-cats/gallery/thumbnails/pose_furikaeru_man.png" /></a></div><div class="popular-posts-title"><h3><div class="popular-posts-date">2021-12-30</div><a href="/cats-cats-cats/2021/12/30/2021-last/" title="2021年の技術的な振り返り" rel="bookmark">2021年の技術的な振り返り</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-img"><a href="/cats-cats-cats/2019/07/04/scala-matsuri-2019/" title="ScalaMatsuri 2019に参加してきました" rel="bookmark"><img src="/cats-cats-cats/gallery/thumbnails/scala-matsuri-logo.png" /></a></div><div class="popular-posts-title"><h3><div class="popular-posts-date">2019-07-04</div><a href="/cats-cats-cats/2019/07/04/scala-matsuri-2019/" title="ScalaMatsuri 2019に参加してきました" rel="bookmark">ScalaMatsuri 2019に参加してきました</a></h3></div></li><li class="popular-posts-item"><div class="popular-posts-img"><a href="/cats-cats-cats/2019/04/30/understanding-pattern-matching/" title="全プログラマに捧ぐ！図解「パターンマッチ」" rel="bookmark"><img src="/cats-cats-cats/gallery/daily/algorithm/pattern-match/pattern-01.png" /></a></div><div class="popular-posts-title"><h3><div class="popular-posts-date">2019-04-30</div><a href="/cats-cats-cats/2019/04/30/understanding-pattern-matching/" title="全プログラマに捧ぐ！図解「パターンマッチ」" rel="bookmark">全プログラマに捧ぐ！図解「パターンマッチ」</a></h3></div></li></ul></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最近の記事</h3><article class="media"><figure class="media-left"><a class="image" href="/cats-cats-cats/2023/04/29/aws-summit-tokyo/"><img src="/cats-cats-cats/gallery/events/aws-summit-tokyo-2023/aws-summit-00.jpeg" alt="AWS Summit Tokyo 2023に参加してきました"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-04-28T22:28:45.000Z">2023-04-29</time></p><p class="title"><a href="/cats-cats-cats/2023/04/29/aws-summit-tokyo/">AWS Summit Tokyo 2023に参加してきました</a></p><p class="categories"><a href="/cats-cats-cats/categories/Tech/">Tech</a> / <a href="/cats-cats-cats/categories/Tech/Event/">Event</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/cats-cats-cats/2023/03/12/ten-key/"><img src="/cats-cats-cats/gallery/events/ten-key-4/tenkey-vol4.png" alt="3年ぶりに開催された天下一キーボードわいわい会 Vol.4に参加してきました"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-03-11T22:28:45.000Z">2023-03-12</time></p><p class="title"><a href="/cats-cats-cats/2023/03/12/ten-key/">3年ぶりに開催された天下一キーボードわいわい会 Vol.4に参加してきました</a></p><p class="categories"><a href="/cats-cats-cats/categories/Tech/">Tech</a> / <a href="/cats-cats-cats/categories/Tech/Event/">Event</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/cats-cats-cats/2023/02/07/sap-on-aws/"><img src="/cats-cats-cats/gallery/daily/cloud/aws/sap-on-aws.png" alt="新しいAWS認定「SAP on AWS - 専門知識」は異質だが役に立つという話 〜合格体験談〜"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-02-06T22:28:45.000Z">2023-02-07</time></p><p class="title"><a href="/cats-cats-cats/2023/02/07/sap-on-aws/">新しいAWS認定「SAP on AWS - 専門知識」は異質だが役に立つという話 〜合格体験談〜</a></p><p class="categories"><a href="/cats-cats-cats/categories/Tech/">Tech</a> / <a href="/cats-cats-cats/categories/Tech/CloudNative/">CloudNative</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/cats-cats-cats/2023/01/22/2022-last/"><img src="/cats-cats-cats/gallery/thumbnails/hofukuzenshin.png" alt="2022年の技術的な振り返り"></a></figure><div class="media-content"><p class="date"><time dateTime="2023-01-21T22:28:45.000Z">2023-01-22</time></p><p class="title"><a href="/cats-cats-cats/2023/01/22/2022-last/">2022年の技術的な振り返り</a></p><p class="categories"><a href="/cats-cats-cats/categories/Tech/">Tech</a> / <a href="/cats-cats-cats/categories/Tech/Miscellaneous/">Miscellaneous</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/cats-cats-cats/2022/12/12/2022-12-rust-practicality/"><img src="/cats-cats-cats/gallery/daily/illustrated-rust/illustrated-rust.png" alt="Rustの実用性が理解できる図を作成してみた 〜C/C++/Java/JS/Python/Go/TS/Elixirとの比較〜"></a></figure><div class="media-content"><p class="date"><time dateTime="2022-12-11T22:28:45.000Z">2022-12-12</time></p><p class="title"><a href="/cats-cats-cats/2022/12/12/2022-12-rust-practicality/">Rustの実用性が理解できる図を作成してみた 〜C/C++/Java/JS/Python/Go/TS/Elixirとの比較〜</a></p><p class="categories"><a href="/cats-cats-cats/categories/Tech/">Tech</a> / <a href="/cats-cats-cats/categories/Tech/Language/">Language</a></p></div></article></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">リンク</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://zenn.dev/hinastory" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Zenn - hinastory</span></span><span class="level-right"><span class="level-item tag">zenn.dev</span></span></a></li><li><a class="level is-mobile" href="https://qiita.com/hinastory" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Qiita - hinastory</span></span><span class="level-right"><span class="level-item tag">qiita.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">カテゴリ</h3><ul class="menu-list"><li><a class="level is-mobile" href="/cats-cats-cats/categories/DIY/"><span class="level-start"><span class="level-item">DIY</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul><li><a class="level is-mobile" href="/cats-cats-cats/categories/DIY/Keyboard/"><span class="level-start"><span class="level-item">Keyboard</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/"><span class="level-start"><span class="level-item">Tech</span></span><span class="level-end"><span class="level-item tag">61</span></span></a><ul><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/Book/"><span class="level-start"><span class="level-item">Book</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/CloudNative/"><span class="level-start"><span class="level-item">CloudNative</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/ComputerScience/"><span class="level-start"><span class="level-item">ComputerScience</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/Event/"><span class="level-start"><span class="level-item">Event</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/Language/"><span class="level-start"><span class="level-item">Language</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/MachineLearning/"><span class="level-start"><span class="level-item">MachineLearning</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/Miscellaneous/"><span class="level-start"><span class="level-item">Miscellaneous</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/categories/Tech/Web/"><span class="level-start"><span class="level-item">Web</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">アーカイブ</h3><ul class="menu-list"><li><a class="level is-mobile" href="/cats-cats-cats/archives/2023/04/"><span class="level-start"><span class="level-item">2023-04</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2023/03/"><span class="level-start"><span class="level-item">2023-03</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2023/02/"><span class="level-start"><span class="level-item">2023-02</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2023/01/"><span class="level-start"><span class="level-item">2023-01</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2019/"><span class="level-start"><span class="level-item">2019</span></span><span class="level-end"><span class="level-item tag">35</span></span></a></li><li><a class="level is-mobile" href="/cats-cats-cats/archives/2018/"><span class="level-start"><span class="level-item">2018</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">タグ</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/AWS/"><span class="tag">AWS</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/AdventCalendar/"><span class="tag">AdventCalendar</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Algorithm/"><span class="tag">Algorithm</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Azure/"><span class="tag">Azure</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Blog/"><span class="tag">Blog</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Book/"><span class="tag">Book</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/CDK/"><span class="tag">CDK</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/CategoryTheory/"><span class="tag">CategoryTheory</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Cats/"><span class="tag">Cats</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Certification/"><span class="tag">Certification</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Cloud/"><span class="tag">Cloud</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Compiler/"><span class="tag">Compiler</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Container/"><span class="tag">Container</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Diet/"><span class="tag">Diet</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Dotty/"><span class="tag">Dotty</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Environment/"><span class="tag">Environment</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/ErgoDash/"><span class="tag">ErgoDash</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Event/"><span class="tag">Event</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Exam/"><span class="tag">Exam</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/FizzBuzz/"><span class="tag">FizzBuzz</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Flourish/"><span class="tag">Flourish</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/GCP/"><span class="tag">GCP</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Game/"><span class="tag">Game</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Git/"><span class="tag">Git</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Go/"><span class="tag">Go</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Hexo/"><span class="tag">Hexo</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/IaC/"><span class="tag">IaC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Interpreter/"><span class="tag">Interpreter</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Jupyter/"><span class="tag">Jupyter</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Keras/"><span class="tag">Keras</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Keyboard/"><span class="tag">Keyboard</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Keymap/"><span class="tag">Keymap</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/M1/"><span class="tag">M1</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/MLOps/"><span class="tag">MLOps</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Mac/"><span class="tag">Mac</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/MachineLearning/"><span class="tag">MachineLearning</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/MakerFaire/"><span class="tag">MakerFaire</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Mind/"><span class="tag">Mind</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Minikube/"><span class="tag">Minikube</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/OGP/"><span class="tag">OGP</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Qiita/"><span class="tag">Qiita</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/ReView/"><span class="tag">ReView</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Ruby/"><span class="tag">Ruby</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Rust/"><span class="tag">Rust</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/SEO/"><span class="tag">SEO</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Scala/"><span class="tag">Scala</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Serverless/"><span class="tag">Serverless</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Snowflake/"><span class="tag">Snowflake</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/StepFunctions/"><span class="tag">StepFunctions</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/TensorFlow/"><span class="tag">TensorFlow</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/UI-UX/"><span class="tag">UI/UX</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/WFH/"><span class="tag">WFH</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/Web/"><span class="tag">Web</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/WebAnalytics/"><span class="tag">WebAnalytics</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/gRPC/"><span class="tag">gRPC</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/html5/"><span class="tag">html5</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/k8s/"><span class="tag">k8s</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/npm/"><span class="tag">npm</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/oEmbed/"><span class="tag">oEmbed</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/cats-cats-cats/tags/pulumi/"><span class="tag">pulumi</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div class="level"><figure class="level-item image is-64x64 mx-auto"><img class="avatar is-rounded" src="https://www.gravatar.com/avatar/1d029a154310d0edb970e8caaf5dc5ec?s=128" alt="hinastory"></figure><div class="level-item"><div><p class="title is-size-4 is-block ml-1" style="line-height:inherit;display:block;">hinastory</p><p class="is-size-6 is-flex justify-content-center ml-3"><i class="fas fa-map-marker-alt mr-1"></i><span>Kanagawa, Japan</span></p></div></div></div></div></nav><nav class="level is-mobile"><p class="is-size-6 is-block">The more you reason the less you create</p></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">投稿</p><a href="/cats-cats-cats/archives"><p class="title">65</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">カテゴリ</p><a href="/cats-cats-cats/categories"><p class="title">11</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">タグ</p><a href="/cats-cats-cats/tags"><p class="title">61</p></a></div></div></nav><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hinastory/"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/hinastory999"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/cats-cats-cats/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">カタログ</h3><ul class="menu-list"><li><a class="level is-mobile" href="#TL-DR"><span class="level-left"><span class="level-item">1</span><span class="level-item">TL;DR</span></span></a></li><li><a class="level is-mobile" href="#Scala3とは"><span class="level-left"><span class="level-item">2</span><span class="level-item">Scala3とは</span></span></a></li><li><a class="level is-mobile" href="#Dottyとは"><span class="level-left"><span class="level-item">3</span><span class="level-item">Dottyとは</span></span></a></li><li><a class="level is-mobile" href="#Contextual-Abstractionsとは"><span class="level-left"><span class="level-item">4</span><span class="level-item">Contextual Abstractionsとは</span></span></a></li><li><a class="level is-mobile" href="#味見の方法"><span class="level-left"><span class="level-item">5</span><span class="level-item">味見の方法</span></span></a></li><li><a class="level is-mobile" href="#味見の結果"><span class="level-left"><span class="level-item">6</span><span class="level-item">味見の結果</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#基本的な例-拡張メソッド"><span class="level-left"><span class="level-item">6.1</span><span class="level-item">基本的な例(拡張メソッド)</span></span></a></li><li><a class="level is-mobile" href="#少し高度な例-givenインスタンス、using節"><span class="level-left"><span class="level-item">6.2</span><span class="level-item">少し高度な例(givenインスタンス、using節)</span></span></a></li><li><a class="level is-mobile" href="#高度な例-型クラス"><span class="level-left"><span class="level-item">6.3</span><span class="level-item">高度な例(型クラス)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Contextual-Abstractionsのその他の機能"><span class="level-left"><span class="level-item">7</span><span class="level-item">Contextual Abstractionsのその他の機能</span></span></a></li><li><a class="level is-mobile" href="#味見してみた感想"><span class="level-left"><span class="level-item">8</span><span class="level-item">味見してみた感想</span></span></a></li><li><a class="level is-mobile" href="#追記・更新内容"><span class="level-left"><span class="level-item">9</span><span class="level-item">追記・更新内容</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2019年3月10日の更新内容"><span class="level-left"><span class="level-item">9.1</span><span class="level-item">2019年3月10日の更新内容</span></span></a></li><li><a class="level is-mobile" href="#2019年6月22日の更新内容"><span class="level-left"><span class="level-item">9.2</span><span class="level-item">2019年6月22日の更新内容</span></span></a></li><li><a class="level is-mobile" href="#2019年9月15日の更新内容"><span class="level-left"><span class="level-item">9.3</span><span class="level-item">2019年9月15日の更新内容</span></span></a></li><li><a class="level is-mobile" href="#2019年9月28日の更新内容"><span class="level-left"><span class="level-item">9.4</span><span class="level-item">2019年9月28日の更新内容</span></span></a></li><li><a class="level is-mobile" href="#2020年2月8日の更新内容"><span class="level-left"><span class="level-item">9.5</span><span class="level-item">2020年2月8日の更新内容</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/cats-cats-cats/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/cats-cats-cats/"><img src="/cats-cats-cats/gallery/profile/cats-cats-cats-logo.png" alt="cats cats cats" height="28"></a><p class="is-size-7"><span>&copy; 2023 hinastory</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ja");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/cats-cats-cats/js/column.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><a id="back-to-top" title="トップに戻る" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/cats-cats-cats/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "このウェブサイトはあなたの経験を改善するためにCookieを使用しています。",
          dismiss: "了解しました",
          allow: "Cookiesを許可する",
          deny: "拒否する",
          link: "もっと詳しく知る",
          policy: "Cookieポリシー",
          href: "https://hinastory.github.io/cats-cats-cats/about/#%E3%82%A2%E3%82%AF%E3%82%BB%E3%82%B9%E8%A7%A3%E6%9E%90%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="/cats-cats-cats/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="何かを入力してください..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/cats-cats-cats/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/cats-cats-cats/content.json"}, {"hint":"何かを入力してください...","untitled":"(無題)","posts":"投稿","pages":"ページ","categories":"カテゴリ","tags":"タグ"});
        });</script></body></html>