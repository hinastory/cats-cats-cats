---
title: サイレントでホットスワップなErgoDash miniを制作(前編)
date: 2019-01-06 07:37:02
thumbnail: /gallery/thumbnails/ergo-dash-mini.jpg
categories:
    - [DIY, Keyboard]
tags:
    - Keyboard
    - ErgoDash
---

2018年のキーボード納めとして、年末にErgoDash miniを組みました。ただ普通に作ったのでは成長がないので、以前よりやってみたかった静音化とキースイッチとProMicroのホットスワップ化に挑みます。

{% linkPreview https://github.com/omkbd/ErgoDash/tree/master/mini %}

<!-- more -->

## 目次

<!-- toc -->

## はじめに

この記事は自作キーボード初心者から中級者向けの記事です。ただ「初めての自作キーボード制作」の場合、静音化とホットスワップ化は難易度が高い箇所があるので、まずはシンプルに一台目を組み上げて自信をつけてから挑戦することをオススメします[^1]。
実際の制作には{% elink 公式のビルドガイド https://github.com/omkbd/ErgoDash/blob/master/mini/Doc/build.md %}を熟読した上で進めてください。この記事は静音化とホットスワップ以外にもビルドガイドの行間とも言える一般的に躓きやすい箇所も説明を入れるように心がけました。これから作業する方の参考に少しでもなれば幸いです。

[^1]: 1台目はシンプルなものでも、いろいろ反省点や改善点が目に付きます。また、シンプルなものを知らないと何が良くなったのがわからないので、お楽しみは２台目以降にとっておきましょう。自分はこれで4台目ですが腕はまだまだです・・・

## ErgoDash miniとは

国内で購入可能なキーボードキットです。もともとErgoDashというものがあってそれよりもキーが一行少ないバージョンが今回制作したminiです。キーボードの特徴としては左右分離型で、一部の物理的なキー配置をカスタマイズすることができます。キー数は52～56キー（最下段をカスタマイズ可能、最大100パターン）です。ケースの関係上、親指あり/なしは購入時に選択する必要があります。

{% blockquote "ErgoDash miniドキュメントより" https://github.com/omkbd/ErgoDash/blob/master/mini/Doc/ergodashmini_jp.md　引用元 %}
{% img https://github.com/omkbd/picture/blob/master/Ergodashmini.jpg?raw=true 400 %}
{% endblockquote %}

- 販売元
  - {% elink だっしゅきぃぼぉど - BOOTH  https://dashkbd.booth.pm/items/1077755 %}
- ビルドガイド
  - {% elink ErgoDash mini Build Guide https://github.com/omkbd/ErgoDash/blob/master/mini/Doc/build.md %}

## 制作工程

実際に自分が行なった手順通りに書いていきます。前述のとおり公式のビルドガイドに含まれていない手順もあります。

### 潤滑剤の塗布

キーボードの静音化は主に以下の３つの対策があるようです。

1. 静音用キースイッチを使う
  - キースイッチ自体に静音化対策が施されています
2. 潤滑剤を使う
  - キースイッチを分解して、擦れる箇所に潤滑剤を塗布します
  - スタビライザーを利用する場合は、スタビライザーにも塗布します
3. O-ringを使う
  - キーを強く打ったときの底打ちの音を抑えるものです

今回は上記の3つとも実施しました。まずはキースイッチを買うところからですが、今回は{% elink Gateron Silent スイッチ https://yushakobo.jp/shop/a02gs/ %}の赤軸を利用しました。Cherry MX互換のサイレントスイッチは他にも色々ありますが、とりあえず手っ取り早く入手できるものを選びました。今回キースイッチをホットスワップ化するので、まずは手持ちのキースイッチで初めて後で交換でも良いです。

次にキースイッチに潤滑剤を塗布します。lubeするとも言います。潤滑剤にも色々ありますが無色透明でプラスチックと金属に塗布可能なものから選択すれば良いです。どの潤滑剤がいいかは正直好みになります。音もそうですが打ち心地にも影響します。塗布箇所や塗布量によっても変わってくるのでいろいろなパターンで研究してみるのが一番いいかと思われます。今回は潤滑剤にKrytox GPL 105を使用しました。
実際の塗布作業ですが、一つ一つキースイッチを分解して潤滑剤を筆で塗る作業です・・・長く・辛い作業です・・・
しかしこの苦痛を軽減するために以下の素晴らしい治具の数々があります。キースイッチオープナーはほぼ必須ですが他も揃えておいたほうが断然楽です。自分の場合、以下の治具を使って2時間かかりました[^2]。

- {% elink キースイッチオープナー https://make.dmm.com/item/969295/ %}
- {% elink スイッチステムホルダー https://make.dmm.com/item/978245/ %}
- {% elink キースイッチオープナー用オプション https://make.dmm.com/item/971817/ %}
- {% elink スイッチ Lube Station https://make.dmm.com/item/976553/ %}

以下の写真は実際にlube作業中の風景です。キースイッチオープナーで必要なキースイッチの個数を分解して、パーツごとに選り分けておきます。その後スイッチの下側部分をLubeステーションにはめ込みます。あとは下側部分に一気に塗布した後、バネと軸を順番に塗布して下側部分に乗せて、最後に上部を戻して完成です。

{% img /gallery/daily/keyboards/lube.jpg 400 %}


[^2]: アニメを見ながらだったので実際はもっと短く済むはずです・・・

### MogeMicro対策

これも公式ビルドガイドには書いていませんが、大事なことなので記載しておきます。キットに付属しているPro microはMogeMicroという蔑称を授けられるほど、USB端子部分が破損しやすいです。何も対策をしないと何回かケーブルを抜き差ししているうちにポロリと逝ってしまわれます。対策は自分の観測範囲で以下の4つがありました。今回は1.を実施しておきます。2.も合わせて購入しておけばさらに安心です。3.はお金に余裕がある人向けです。4.はここを読まれている方にはとりあえず無視してもらって構いません・・・気になる方は調べてみてください。

1. エポキシ系樹脂で固める
2. 磁石で着脱可能なmicro USBケーブルにする
3. {% elink Pro micro スイッチサイエンス版 https://www.switch-science.com/catalog/3914/ %}を買う
4. BLE Micro Proを使って無線化する

エポキシ系樹脂は２つの液剤を混ぜて使うタイプのものです。よく混ぜたらUSB端子の側面に盛って行きましょう。注意点としてはスルーホールに液剤が流れ込まないようにすることと、USB端子の上部に液剤を盛るとケースに干渉するので側面だけにしておくことです。もちろんUSB端子も塞いではいけません(笑)。液剤が固まるまでそこそこ時間がかかるのでMogeMicro対策は組み立て工程の最初に行っておくのがオススメです。

{% img /gallery/daily/keyboards/pro-micro.jpg 400 %}

### ダイオードの取り付け

ダイオードはキットに標準で付属するスルーホールに挿して使うタイプのものを使用します。表面実装タイプ(SMD)のものも利用できそうですが、はんだ付けの難易度がぐっと上がるので今回は見送りました。ダイオードを取り付ける前にダイオードの足を曲げる必要がありますが、正しい長さで曲げないとスルーホールにきちんと嵌らないので楽をしたいなら治具({% elink リードベンダ ー https://www.sunhayato.co.jp/blog/2015/03/04/8 %})を使うことをオススメします。

{% img /gallery/daily/keyboards/diode1.jpg 400 %}

ダイオードの足を曲げ終えたら一度PCBに全て挿してダイオードの向きが間違えていないか、挿し忘れがないか確認します。ここは本当に何回も見直したほうが良いです。はんだ付けしたあと間違いを見つけると心が折れてしまいます・・・あとErgoDashではダイオードの隣に抵抗のスルーホールがある箇所があるので差し間違いが容易に起こりえます。公式のビルドガイドの写真で色分けされているのでしっかりと確認しましょう[^3]。ダイオードの確認時は{% elink ツールクリッパー http://www.tsk-j.com/dtl/dtl_4/ %}という治具が役立ちます。下の写真のように基盤をツールクリッパーで固定すればダイオードを挿す工程と確認工程が非常に楽です。電子工作をしていると時々腕が足りなくなるので、とりあえず持っておいて損はないと思います。

{% img /gallery/daily/keyboards/diode2.jpg 400 %}

ダイオードの確認が終わったらマスキングテープでダイオードを仮止めしてからはんだ付けに入ります。上の写真ではマスキングテープの代わりにカプトンテープを使っています[^4]。
ここからはようやくはんだ付けの作業です。今回は有鉛はんだを用いました。鉛は有害なので作業中は煙をなるべく吸わないようにしてこまめに換気しながら作業しました。はんだ付けは温度が命と言われていますので{% elink 温度調整機能付きのはんだごて https://www.amazon.co.jp/%E7%99%BD%E5%85%89-HAKKO-FX600-02-%E3%83%80%E3%82%A4%E3%83%A4%E3%83%AB%E5%BC%8F%E6%B8%A9%E5%BA%A6%E5%88%B6%E5%BE%A1%E3%81%AF%E3%82%93%E3%81%A0%E3%81%93%E3%81%A6-FX600/dp/B006MQD7M4 %}を使用します。ただし標準のの小手先だと母材に熱が伝わりにくいため小手先をC型のものに変えました。はんだ付けのコツは母材を温めてからハンダをそっと近づけて溶かして流し込む感じなそうですが、言葉だけでは伝わりにくいので一度YouTube等ではんだ付けの動画を検索してみることをオススメします。

{% img /gallery/daily/keyboards/soldering.jpg 400 %}

[^3]: 実際私は再確認で合計3箇所の間違いを発見しました・・・過信は禁物です。
[^4]: カプトンテープは絶縁にも使えるので持っておいて損はないです。

### TRRSジャックとリセットスイッチの取り付け

TRRSジャックとリセットスイッチの取り付けは公式のビルドガイドの通りに実施すれば問題ないはずです。基盤の裏側に取り付けることだけを気をつけていれば十分です[^5]。
公式のビルドガイドではこの手順の前にオプションとしてBacklight LED用のパーツ取り付けがありますが、今回はBacklight LEDは取り付けないのでスキップします。というのも、Backlight LEDはスイッチの上から挿さないといけないため、スイッチをホットスワップにするとLEDもホットスワップにしないといけませんが今回はそこまで手が回りませんでした[^6]。

[^5]: 基盤は右手側と左手側で裏表が逆になるので注意が必要です。
[^6]: 公式のビルドガイドにありませんが、チップLEDにする方法もあるのでBacklight LEDに関しては後で検討します。。。

### Undergrow LEDの取り付け

Backlight LEDに関しては一旦保留にしましたが、やはり光らせたいという欲求はあるのでUndergrow LEDを実装します。今までテープ型や砲弾型のLEDは実装したことがありましたが、チップ単体での実装は初チャレンジです。チップは公式で案内されているとおり{% elink WS2812B http://akizukidenshi.com/catalog/g/gI-07915/ %}を電子工作の強い味方、秋月電子さんで購入しました。初期不良や取り付け途中で壊してしまうことも考慮して5セット分余分に購入しました。汎用LEDなので余った分は他の電子工作で使う予定です。

{% img /gallery/daily/keyboards/WS2812B.jpg 400 %}

公式のビルドログのとおりUndergrowを有効にするにはマスター(USBを挿す方)を決めて、はんだでジャンパする必要があります。このはんだだけでジャンパさせる方法も最初は慣れませんでしたが、ショートさせたいランドの双方にはんだを盛った後(予備ハンダ)、はんだを供給しながら小手先で盛ったはんだを溶かして繋ぐように動かせばうまくいくようになりました。
そしていよいよLEDのはんだ付けですが、意外とLEDが小さいので思ったよりは面倒でした。取り付けの際に注意したほうがいいと思ったのは以下の3点です。

- LEDの方向に注意する
- LEDが浮かないように注意する
- LEDを熱で壊さないようにする

LEDには方向があります。公式のビルドガイドを見て方向を間違わないようにしましょう。LEDは直列につながっていて、ErgoDash miniではマスターの内側から外側に向けてぐるっと回って、反対側の基盤の外側から内側に向けて繋がっている感じです。
LEDの方向がわかったらマスキングテープでチップの片側を固定します。このときチップが浮かないように確認してください。チップが浮いてしまうと接続不良になる恐れがあります。マスキングテープは片側のはんだが終われば剥がして、もう片側をはんだします。
また、LEDは非常に熱に弱いみたいです。有鉛はんだではんだ付けする場合340℃から360℃に温度を調整するのが一般的ですが、今回は260℃でなるべく短時間ではんだ付けするように意識しました[^7]。はんだの方法はまず軽くランドを温めてはんだを盛った後、素早くチップの電極に触れてはんだを接着させました。電極にふれる時間はほんの一瞬です。

[^7]: ErgoDash miniのビルドガイドには、はんだ付けの推奨温度は書いてありませんでしたが、Helixのビルドガイドでは220℃を推奨していました。高い温度で行うとはんだが溶けやすく作業がしやすいのですが、LEDを熱で壊すリスクがあります。あくまで温度の調整は自己責任でお願いします。

### 後編へと続く・・・

後編ではいよいよPro Microとキースイッチのホットスワップ化に挑みます。

{% post_link ergodash-mini-2 %}